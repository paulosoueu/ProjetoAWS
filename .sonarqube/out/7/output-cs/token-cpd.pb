Ñ	
IC:\Users\poce\Desktop\Bari\Bari\BancoBari\BancoBari.JobMessage\Program.cs
	namespace 	
	BancoBari
 
. 

JobMessage 
{ 
public 

class 
Program 
{ 
public		 
static		 
void		 
Main		 
(		  
string		  &
[		& '
]		' (
args		) -
)		- .
{

 	 
CreateWebHostBuilder  
(  !
args! %
)% &
.& '
Run' *
(* +
)+ ,
;, -
} 	
public 
static 
IWebHost  
CreateWebHostBuilder 3
(3 4
string4 :
[: ;
]; <
args= A
)A B
=>C E
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseSerilog 
( 
) 
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. 
Build 
( 
) 
; 
} 
} ·
IC:\Users\poce\Desktop\Bari\Bari\BancoBari\BancoBari.JobMessage\Startup.cs
	namespace		 	
	BancoBari		
 
.		 

JobMessage		 
{

 
public 

class 
Startup 
{ 
private 
readonly 
IConfigurationRoot +
Configuration, 9
;9 :
public 
Startup 
( 
) 
{ 	
var 
builder 
= 
new  
ConfigurationBuilder 2
(2 3
)3 4
. 
AddJsonFile 
( 
$str /
)/ 0
. #
AddEnvironmentVariables (
(( )
)) *
;* +
Configuration 
= 
builder #
.# $
Build$ )
() *
)* +
;+ ,
} 	
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
IoC 
. 
ApplyServices 
( 
services &
)& '
;' (
services 
. 
AddHostedService %
<% &
Worker& ,
>, -
(- .
). /
;/ 0
} 	
public!! 
void!! 
	Configure!! 
(!! 
IApplicationBuilder!! 1
app!!2 5
,!!5 6
IWebHostEnvironment!!7 J
env!!K N
)!!N O
{"" 	
if## 
(## 
env## 
.## 
IsDevelopment## !
(##! "
)##" #
)### $
{$$ 
app%% 
.%% %
UseDeveloperExceptionPage%% -
(%%- .
)%%. /
;%%/ 0
}&& 
app(( 
.(( 

UseRouting(( 
((( 
)(( 
;(( 
app** 
.** 
UseEndpoints** 
(** 
	endpoints** &
=>**' )
{++ 
	endpoints,, 
.,, 
MapGet,,  
(,,  !
$str,,! $
,,,$ %
async,,& +
context,,, 3
=>,,4 6
{-- 
await.. 
context.. !
...! "
Response.." *
...* +

WriteAsync..+ 5
(..5 6
$str..6 D
)..D E
;..E F
}// 
)// 
;// 
}00 
)00 
;00 
}11 	
}22 
}33 Û
HC:\Users\poce\Desktop\Bari\Bari\BancoBari\BancoBari.JobMessage\Worker.cs
	namespace 	
	BancoBari
 
. 

JobMessage 
{		 
public

 

class

 
Worker

 
:

 
BackgroundService

 +
{ 
private 
readonly 
IMessageService (
_messageService) 8
;8 9
private 
readonly 
ILogger  
_logger! (
;( )
public 
Worker 
( 
IMessageService %
messageService& 4
,4 5
ILogger6 =
logger> D
)D E
{ 	
_messageService 
= 
messageService ,
;, -
_logger 
= 
logger 
; 
} 	
	protected 
override 
async  
Task! %
ExecuteAsync& 2
(2 3
CancellationToken3 D
stoppingTokenE R
)R S
{ 	
while 
( 
! 
stoppingToken !
.! "#
IsCancellationRequested" 9
)9 :
{ 
try 
{ 
_logger 
. 
Information '
(' (
$str( ?
)? @
;@ A
await 
_messageService )
.) *
ProcessarMensagem* ;
(; <
)< =
;= >
await 
Task 
. 
Delay $
($ %
$num% )
,) *
stoppingToken+ 8
)8 9
;9 :
} 
catch 
( 
	Exception  
e! "
)" #
{   
_logger!! 
.!! 
Error!! !
(!!! "
$str!!" *
+!!+ ,
e!!- .
.!!. /
Message!!/ 6
)!!6 7
;!!7 8
await"" 
Task"" 
."" 
Delay"" $
(""$ %
$num""% )
,"") *
stoppingToken""+ 8
)""8 9
;""9 :
}## 
}$$ 
}%% 	
}&& 
}'' 